<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: iOS | Junda Ong]]></title>
  <link href="http://samwize.github.com/blog/categories/ios/atom.xml" rel="self"/>
  <link href="http://samwize.github.com/"/>
  <updated>2012-11-13T22:13:30+08:00</updated>
  <id>http://samwize.github.com/</id>
  <author>
    <name><![CDATA[Junda]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Which Ad Network to use in iOS?]]></title>
    <link href="http://samwize.github.com/2012/11/13/which-ad-network-to-use-in-ios/"/>
    <updated>2012-11-13T21:24:00+08:00</updated>
    <id>http://samwize.github.com/2012/11/13/which-ad-network-to-use-in-ios</id>
    <content type="html"><![CDATA[<p>My experience with using ads in iOS goes as far back in 2008 when iOS is released. It was simple back then, but now, I have lost count of the number of ad networks.</p>

<p>See what I mean:</p>

<p><a href="http://www.mobyaffiliates.com/blog/mobile-advertising-networks-market-map/"><img class="center" src="http://mobyaff2.danharrison.netdna-cdn.com/wp-content/uploads/2012/10/Mobile-Advertising-Networks-Market-Map-600.png"></a></p>

<p>This post I am going rave a bit. So..</p>

<p>tldr;</p>

<ul>
<li>Use 2 mediation - <a href="http://admob.com">Admob</a> &amp; <a href="http://mopub.com">MoPub</a> - and split them 50-50</li>
<li>Use <a href="http://admob.com">Admob</a></li>
<li>Use <a href="http://mmedia.com/">MillenialMedia/mMedia</a></li>
<li>Use <a href="inmobi.com">InMobi</a></li>
<li>Use <a href="https://developer.apple.com/iad/">iAd</a></li>
</ul>


<!-- more -->


<h2>In the early days..</h2>

<p>Back in the early days (2008), there is an obvious choice - <a href="http://admob.com">Admob</a>.</p>

<p>Back then, Admob is a startup, with strength in mobile analytics and mobile advertising. In fact, I started using them for mobile analytics in 2007.</p>

<p>When iPhone boomed, so did their value as they have a strong mobile ad network. They were eventually acquired by Google in the range of $BILLION$!</p>

<h2>Then come mediation - Adwhirl</h2>

<p>I was quite comfortable just serving ads from admob. It was also the first time that I had revenue coming from ads!</p>

<p>It was good, but I soon realized it could be better in around 2009.</p>

<p>Ads mediation became popular, and <a href="https://www.adwhirl.com/">Adwhirl</a> was the popular choice, as they are free, uncluttered, and open source.</p>

<p>By using a mediation means I start to use more than 1 ad network. Read on what I used.</p>

<p>Once again, Adwhirl was eventually acquired by Google..</p>

<h2>More ad networks</h2>

<p><a href="https://www.google.com/adsense/">Google Adsense</a> was the main reason that I used a mediation. In 2009, Google was a newcomer to mobile advertising, with Admob dominating.</p>

<p>However, we all know Google has the resource to catch, plus it has good network on the web advertising. I applied to be the BETA to mobile Adsense. I got in, integrated with Adwhirl, and revenue gets even better!</p>

<p>I realized mediation does help a lot. Reasons:</p>

<ul>
<li>When 1 ad network cannot be filled, it can try others</li>
<li>Inventory increased, so there is more varierty of ads shown</li>
</ul>


<p>I also integrated Quattro and Greystripe, but with little success from them.</p>

<p>And also iAd, but little success as my users are mainly outside US.</p>

<h2>The Google world is not good</h2>

<p>I have thought with the acquisition of Admob and Adwhirl, Google will provide great stuff.</p>

<p>I was totally wrong.</p>

<p>Admob is not improving. Their website design remains the same as 5 years ago. What's worse is that by introducing mediation and house ads, they now look complicated.</p>

<p>Adwhirl is deprecated. It's last SDK update is in 2011. If you want to use Adwhirl, you should use Admob. But there are actually better alternatives.</p>

<h2>MoPub - the new kid</h2>

<p>I started looking into <a href="http://mopub.com">MoPub</a> in 2012 for these reasons:</p>

<ul>
<li><p>Admob mediation is cranky. It reported fill rate as <a href="https://groups.google.com/forum/#!msg/google-admob-ads-sdk/wLMKhV2pMiA/tHfttXGfzlEJ">low</a> as 4% for my other networks! (serving Admob ads is very fine >90%)</p></li>
<li><p>Admob provides no support. Just like other Google service, it is hard to even find their support email. I posted on their Forum, but no Admob staff is replying.</p></li>
<li><p>Admob SDK will crash when they serve InMobi (hence I cannot use InMobi at all)</p></li>
<li><p>Admob website looks like in the 1990s</p></li>
</ul>


<p>To sum up, I wanted to move away from Admob.</p>

<p>MoPub looks great, and has it's SDK opensourced.</p>

<p>One of the problem with mediation is that integration is complex, and the network adaptors could be buggy (like the InMobi case with Admob). I thought MoPub is smart to provide their SDK source code. If there is a problem, at least we can fix it.</p>

<p>MoPub also promised integration with certain ad network without the need to integrate into the app. I have yet to try.</p>

<h2>The 50-50 mode</h2>

<p>However, that said, I choose to use both Admob and MoPub as mediation.</p>

<p>When I was using MoPub, I encountered some problems too.</p>

<ul>
<li><p>Frequently, it has the error "server response indicated no ad available." and doesn't get filled!</p></li>
<li><p>MoPub serve in a eCPM waterfall manner. That is it get ads from the network that pays best first, if not filled, then it moves on.</p></li>
</ul>


<p>Because of that, MoPub often serve the same ad. I seldom see Admob/Adsense ads. I rather have variety in my inventory.</p>

<p>To play safe, I do a 50-50 split.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[My Custom Localization and genstrings]]></title>
    <link href="http://samwize.github.com/2012/11/06/my-custom-localization-and-genstrings/"/>
    <updated>2012-11-06T21:49:00+08:00</updated>
    <id>http://samwize.github.com/2012/11/06/my-custom-localization-and-genstrings</id>
    <content type="html"><![CDATA[<p>This post is about some custom stuff I did for <a href="https://developer.apple.com/library/ios/#documentation/MacOSX/Conceptual/BPInternational/Articles/ChoosingLocalizations.html">localization</a>.</p>

<p>It does not cover the <a href="http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial">basic</a> of how you localized an app, nor how to use the Apple provided <a href="http://spritebandits.wordpress.com/2012/01/25/ios-iphone-app-localization-genstrings-tips/">genstrings</a> tool.</p>

<!-- more -->


<p>I have some particular bad vibes with using <code>NSLocalizedString</code>. I hate it being 17 characters long, and the REQUIRED comment parameter that you MUST pass in, which usually is just <code>nil</code> for me.</p>

<p>And so I have my own Macro called <code>Localized</code>.</p>

<p>Which I improved to read from other table strings, and has an awesome recursive replacement.</p>

<p>By doing that, I lose the use of <code>genstrings</code>, as it no longer uses <code>NSLocalizedString</code>. Unfortunately <code>genstrings</code> is closed source. But fortunately, some <a href="https://github.com/dunkelstern/Cocoa-Localisation-Helper">python helper</a> is around.</p>

<p>And the result is at <a href="https://github.com/samwize/localized">https://github.com/samwize/localized</a>.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOS Accessibility Guide for Developers]]></title>
    <link href="http://samwize.github.com/2012/11/04/ios-accessibility-guide-for-developers/"/>
    <updated>2012-11-04T18:25:00+08:00</updated>
    <id>http://samwize.github.com/2012/11/04/ios-accessibility-guide-for-developers</id>
    <content type="html"><![CDATA[<p>There are some simple steps you can take to make your iOS app friendly to the visually impaired users. All you need is to provide more meaningful labels and iOS VoiceOver will take care of it.</p>

<p>I am guilty that I didn't take these simple steps whenever I release a new app, even though I know about it since iOS 3.. Sometimes, I need a <a href="http://mattgemmell.com/2012/10/26/ios-accessibility-heroes-and-villains/">reminder</a>.</p>

<p>Treat this post as <em>another reminder</em>. And as a guide.</p>

<!-- more -->


<h2>Test with Accessibility Inspector</h2>

<p>In <strong>iOS Simulator</strong> (NOT actual device), go to Settings > General > Accessibility and switch it on.</p>

<p>You may now observe accessibility information for each UI element.</p>

<h2>Define in Interface Builder</h2>

<p>If you are using IB to build your UI, you can easily edit from the Identity Inspector. All <code>UIView</code> comes with accessibility attributes.</p>

<p><img src="/images/xcode-accessibility-inspector.png" title="Accessibility Inspector" ></p>

<ul>
<li>Enable Accessibility</li>
<li>Enter a label. This is what will be read with VoiceOver.</li>
<li>Enter a hint, if the label could be ambiguous.</li>
</ul>


<h2>Change Programmatically</h2>

<p>You can also change the label and hint programmatically.</p>

<p>If you have a <code>UILabel</code>, it will read the text of the label. However if that is not descriptive, you could</p>

<pre><code>mylabel.accessibilityLabel = @"Play the music";
mylabel.accessibilityHint = @"Play the music right now";
</code></pre>

<h2>UITableViewCell</h2>

<p>It is most likely a table view cell is made up of a couple of UI elements. However, it would be difficult to select the individual elements.</p>

<p>Hence you could help be aggregating the labels and set the <code>UITableCellView</code> accessibility options.</p>

<h2>UISlider</h2>

<p>For slider, you may also want to set the value.</p>

<pre><code>mySlider.accessibilityValue = @"Volume at 50%";
</code></pre>

<h2>Test on Device</h2>

<p>Go to Settings > General > Accessibility > Enable VoiceOver.</p>

<p>Test it out!</p>

<h2>Advanced</h2>

<p>I have merely list the <em>simple</em> steps I usually used.</p>

<p>Apple has it's own <a href="http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/iPhoneAccessibility/Making_Application_Accessible/Making_Application_Accessible.html#//apple_ref/doc/uid/TP40008785-CH102-SW5">complete guide</a> on how you should approach the topic, including custom views and <code>UIAccessibilityPostNotification</code>. <a href="http://mattgemmell.com/2010/12/19/accessibility-for-iphone-and-ipad-apps/">Matt Gemmell</a> also covers the topic.</p>

<p>Hope you be a hero!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOS Guide to Multiple Device Resolutions]]></title>
    <link href="http://samwize.github.com/2012/10/29/ios-guide-to-multiple-device-resolutions/"/>
    <updated>2012-10-29T23:23:00+08:00</updated>
    <id>http://samwize.github.com/2012/10/29/ios-guide-to-multiple-device-resolutions</id>
    <content type="html"><![CDATA[<p>With every iOS updates and new release of devices from Apple, there are more things developers have to do.</p>

<p>In order to support these new devices, you first need to understand these devices.</p>

<!-- more -->


<h2>Device Resolutions</h2>

<p>Apple provides a <a href="http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/IconsImages/IconsImages.html#//apple_ref/doc/uid/TP40006556-CH14-SW1">table matrix</a> on the App Icons, Screen size, and tool bar icon sizes for the various devices.</p>

<table>
<thead>
<tr>
<th></th>
<th>             </th>
<th> iPhone 5        </th>
<th> iPhone (Retina)   </th>
<th> iPhone        </th>
<th> iPad (Retina) </th>
<th> iPad          </th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td> App Icon    </td>
<td> 114 x 114       </td>
<td> 114 x 114         </td>
<td> 57 x 57       </td>
<td> 144 x 144     </td>
<td> 72 x 72       </td>
</tr>
<tr>
<td></td>
<td> Default.png </td>
<td> 640 x 1136      </td>
<td> 640 x 960         </td>
<td> 320 x 480     </td>
<td> 1536 x 2008   </td>
<td> 768 x 1004    </td>
</tr>
<tr>
<td></td>
<td> Toolbar icon</td>
<td> 40 x 40         </td>
<td> 40 x 40           </td>
<td> 20 x 20       </td>
<td> 40 x 40       </td>
<td> 20 x 20       </td>
</tr>
</tbody>
</table>


<h2>Image Resource File</h2>

<p>Apple introduced an easy way to load <a href="http://developer.apple.com/library/ios/#documentation/2DDrawing/Conceptual/DrawingPrintingiOS/SupportingHiResScreensInViews/SupportingHiResScreensInViews.html#//apple_ref/doc/uid/TP40010156-CH15">images</a> automatically for the devices.</p>

<p>The rule goes like this:</p>

<ul>
<li><p>Standard: <code>&lt;ImageName&gt;&lt;device_modifier&gt;.&lt;filename_extension&gt;</code></p></li>
<li><p>High resolution: <code>&lt;ImageName&gt;@2x&lt;device_modifier&gt;.&lt;filename_extension&gt;</code></p></li>
</ul>


<p>For <a href="http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/LoadingResources/ImageSoundResources/ImageSoundResources.html#//apple_ref/doc/uid/10000051i-CH7-SW1">example</a>,</p>

<ul>
<li>MyImage.png - Default version of an image resource.</li>
<li>MyImage@2x.png - High-resolution version of an image resource for devices with Retina displays.</li>
<li>MyImage~iphone.png - Version of an image for iPhone and iPod touch.</li>
<li>MyImage@2x~iphone.png - High-resolution version of an image for iPhone and iPod touch devices with Retina displays.</li>
<li>MyImage~ipad.png - Version of an image for iPad</li>
<li>MyImage@2x~ipad.png - High-resolution version of an image for iPad with Retina displays.</li>
</ul>


<p>With that knowledge, you could load a UIImage</p>

<pre><code>UIImage *anImage = [UIImage imageNamed:@"MyImage"];
</code></pre>

<p>and the appropriate resource file will be loaded.</p>

<h2>iPhone 5 - taller screen</h2>

<p>Unfortunately, for the taller iPhone 5, it does not automatically load <code>MyImage@2x~iphone5.png</code>.</p>

<p>You could use a <a href="http://stackoverflow.com/questions/5088945/use-2x-retina-images-for-ipad-in-universal-app-and-does-apple-prefer-native-ap">handy</a> UIImage category to load.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Simple GET/POST AFNetworking]]></title>
    <link href="http://samwize.github.com/2012/10/25/simple-get-post-afnetworking/"/>
    <updated>2012-10-25T00:32:00+08:00</updated>
    <id>http://samwize.github.com/2012/10/25/simple-get-post-afnetworking</id>
    <content type="html"><![CDATA[<p><a href="https://github.com/AFNetworking/AFNetworking">AFNetworking</a> is the choice for iOS/Mac developers when it comes to choosing a HTTP library.</p>

<p><a href="http://allseeing-i.com/ASIHTTPRequest/">ASIHTTPRequest</a> used to be the choice, until 2011 when it became inactive.</p>

<p>I am one of the many who is forced to switch camp.</p>

<!-- more -->


<p>In many ways, it seems AFNetworking would be better. It uses blocks!</p>

<p>However, I find the documentation lacking. It has an <a href="https://github.com/AFNetworking/AFNetworking">overview</a>, <a href="https://github.com/AFNetworking/AFNetworking/wiki/Getting-Started-with-AFNetworking">getting started</a>, <a href="https://github.com/AFNetworking/AFNetworking/wiki/Introduction-to-AFNetworking">introduction</a>, <a href="http://afnetworking.github.com/AFNetworking/">complete reference</a>, ... But yet, it didn't provide example on how you make a simple HTTP GET or POST.</p>

<p>Here is how you do it:</p>

<h2>GET</h2>

<p>```objc</p>

<pre><code>AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:@"http://samwize.com/"]];
NSMutableURLRequest *request = [httpClient requestWithMethod:@"GET" 
                                                        path:@"http://samwize.com/api/pigs/" 
                                                  parameters:nil];
AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
[httpClient registerHTTPOperationClass:[AFHTTPRequestOperation class]];
[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    // Print the response body in text
    NSLog(@"Response: %@", [[NSString alloc] initWithData:responseObject encoding:NSUTF8StringEncoding]);
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"Error: %@", error);
}];
[operation start];
</code></pre>

<p>```</p>

<h2>POST</h2>

<p>POST a urlencoded form <code>name=piggy</code> in the http body.</p>

<p>```objc</p>

<pre><code>AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:@"http://samwize.com/"]];
[httpClient setParameterEncoding:AFFormURLParameterEncoding];
NSMutableURLRequest *request = [httpClient requestWithMethod:@"POST" 
                                                        path:@"http://samwize.com/api/pig/" 
                                                  parameters:@{@"name":@"piggy"}];

// Similar to GET code ...
</code></pre>

<p>```</p>

<p>If you want to POST a json such as <code>{"name":"piggy"}</code>, you change the encoding:</p>

<p>```objc</p>

<pre><code>[httpClient setParameterEncoding:AFJSONParameterEncoding];
</code></pre>

<p>```</p>

<p>If you want to do a multi-part POST of an image, you do this:</p>

<p>```objc
NSMutableURLRequest *request = [httpClient multipartFormRequestWithMethod:@"POST" path:@"http://samwize.com/api/pig/photo" parameters:nil constructingBodyWithBlock: ^(id <AFMultipartFormData>formData) {</p>

<pre><code>[formData appendPartWithFileData:imageData name:@"avatar" fileName:@"avatar.jpg" mimeType:@"image/jpeg"];
</code></pre>

<p>}];
```</p>

<p>This simple guide has been helped by <a href="http://stackoverflow.com/questions/9927945/afnetworking-post-to-rest-webservice">this</a>, <a href="http://stackoverflow.com/questions/9275333/afnetworking-post-request-with-application-x-www-form-urlencoded">this</a> and <a href="http://stackoverflow.com/questions/8468065/is-there-an-example-of-afhttpclient-posting-json-with-afnetworking">this</a>.</p>

<h2>Pitfalls</h2>

<p>Do not use <code>[[AFHTTPClient alloc] init]</code>, as that does not initialize a lot of stuff. Use <code>initWithBaseURL</code> instead.</p>

<p>For instance, if in the above example (POST JSON) you had used init, the Content-Type will be</p>

<pre><code>application/json; charset=(null) 
</code></pre>

<p>Charset should be <code>utf-8</code>, not <code>null</code>.</p>
]]></content>
  </entry>
  
</feed>
