<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: iOS | Junda Ong]]></title>
  <link href="http://samwize.github.com/blog/categories/ios/atom.xml" rel="self"/>
  <link href="http://samwize.github.com/"/>
  <updated>2012-11-25T02:07:56+08:00</updated>
  <id>http://samwize.github.com/</id>
  <author>
    <name><![CDATA[Junda]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[WARNING: Do not use Base Internationalization in iOS 5]]></title>
    <link href="http://samwize.github.com/2012/11/22/warning-do-not-use-base-internationalization-in-ios-5/"/>
    <updated>2012-11-22T21:57:00+08:00</updated>
    <id>http://samwize.github.com/2012/11/22/warning-do-not-use-base-internationalization-in-ios-5</id>
    <content type="html"><![CDATA[<p>iOS 5 does NOT support Base Internationalization.</p>

<p>I learnt this the hard way (and partly Apple's fault).</p>

<p>After upgrading my project to use Base Internationalization, I release a new version, and shortly, my users complained of startup crash.</p>

<!-- more -->


<h2>New release, crash on startup</h2>

<p>You might be wondering:</p>

<blockquote><p>Didn't you test your app?</p></blockquote>

<p>I did test, <strong>but only with Simulator</strong>. I ran on Simulator with iOS 5, and also tested on my real device with iOS 6.0.</p>

<p>It didn't crash on Simulator with iOS 5.</p>

<p>However, on a real iPhone with iOS 5, it crashed on startup.</p>

<p>Exception is raised from <code>[UINib instantiateWithOwner:options:]</code>, with the error log:</p>

<pre><code>Terminating app due to uncaught exception 'NSInternalInconsistencyException', 
reason: 'Could not load NIB in bundle: 'NSBundle 
&lt;/var/mobile/Applications/***/***.app&gt; (loaded)' with name 'MainWindow''
</code></pre>

<p>This <a href="http://stackoverflow.com/questions/9075298/app-works-on-simulator-but-not-on-iphone">meant</a> that the app could not find <code>MainWindow.xib</code>.</p>

<p>It is strange that the xib is not copied, especially when I am prudent to do clean build and run.</p>

<h2>The culprit</h2>

<p>Base Internationalization was introduced in iOS 6. It is an awesome feature because: instead of having N NIB files for N languages, you need just <strong>1 base NIB file</strong> with <strong>N localization.strings</strong>.</p>

<p>The biggest change I had for the release was Base Internationalization.</p>

<p>Researching into the problem, I realized Base Internationalization is supported only from iOS 6.</p>

<p>Xcode will let you release the app with <em>any minimum deployment target</em>, without any warning. But once the app starts and load a xib, it will crash as it can't find the xib.</p>

<h2>The Solution</h2>

<p>The change is reversible.</p>

<p>Select the XIB and look under File Inspector.</p>

<p>You can change each of the <code>localization.strings</code> back to XIB. Then remove the Base (when prompted, copied it to English).</p>

<h2>Lessons Learnt</h2>

<ul>
<li><p>Simulator is not exactly like real device</p></li>
<li><p>Base Internationalization is awesome, but is not advised to be used</p></li>
<li><p>Many users stick with iOS 5 because of Map app. Perhaps they will upgrade in ~2014 as Apple continues to improve.</p></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOS Adhoc Distribution with the new Xcode]]></title>
    <link href="http://samwize.github.com/2012/11/14/ios-adhoc-distribution-with-the-new-xcode/"/>
    <updated>2012-11-14T22:00:00+08:00</updated>
    <id>http://samwize.github.com/2012/11/14/ios-adhoc-distribution-with-the-new-xcode</id>
    <content type="html"><![CDATA[<p>If you are an iOS developer, you are probably familiar with the 3 ways to install an app - Run/debug on device, Ad hoc distribution, and App Store distribution.</p>

<p>For each of the 3 ways, Apple provisioning portal has provided the provisioning certs you must use to sign the binary.</p>

<p><strong>Adhoc distribution</strong> is the most complicated (the other 2 ways are very straight forward). Over the years, the process has also changed.</p>

<p>This post is for development with Xcode 4.5.</p>

<!-- more -->


<h2>In the past</h2>

<p>In the early days (year 2008), the guide to Adhoc distribution was to create a new build configuration called "Adhoc", in addition to "Debug" and "Release".</p>

<p>I know why it is necessary back then, but that is not necessary now. But some posts still <a href="http://diaryofacodemonkey.ruprect.com/2011/03/18/ad-hoc-app-distribution-with-xcode-4/">insisted</a> that.</p>

<h2>The new way</h2>

<p>With Xcode 4.5 (or perhaps earlier), Project Schemes is introduced. It provides more ways you can configure how you "Build", "Run", "Test", "Analyse" and "Archive". You can change the build configuration to "Debug" or "Release" as you wanted.</p>

<p>You don't need to touch them.</p>

<p>To distribute Adhoc way, you only need to "Archive".</p>

<p>Then in Organizer, click on the "Distribute" button, and select "Save for Enterprise or Ad-Hoc Deployment".</p>

<p>Select the Adhoc provisioning cert (you would need to download from Apple portal, and install to Xcode).</p>

<p><img src="/images/xcode-distribute-adhoc-enterprise.png" title="Adhoc Distribution" ></p>

<p>Save the <code>App.ipa</code>.</p>

<p>To install, drag to iTunes and sync. That's it!</p>

<h2>Push Notification</h2>

<p>Things get slightly more complicated if you are using Apple Push Notifications.</p>

<p>To use push, there are 2 more certs needed for your server to communicate with Apple. One is <code>aps-development</code>, the other is <code>aps-production</code>.</p>

<p>You use <code>aps-development</code> for running on device using "Debug" build configuration.</p>

<p>You use <code>aps-production</code> for both Adhoc and App Store distribution.</p>

<p>Not the other way round. Adhoc distributed apps will NOT get push when you use <code>aps-development</code>.</p>

<p>Why?</p>

<blockquote><p>Because Adhoc distributed apps will register device token to <strong>Apple production gateway</strong>, while your <code>aps-development</code> communicates with <strong>Apple sandbox gateway</strong>.</p></blockquote>

<p>If you want Adhoc distributed apps to get push, you must send the push with <code>aps-production</code>. Adhoc is as good as production app, yet not on the App Store.</p>

<h2>Conclusion</h2>

<p>In the past, you need to create a new build configuration call "Adhoc". But that is no longer needed as you can select which cert to re-sign after archiving.</p>

<p>I will not cover wireless distribution today (though you may refer to <a href="http://blog.just2us.com/2010/12/wireless-ad-hoc-distribution-for-iphone-apps/">this method using dropbox</a>).</p>

<p>Or you could use <a href="https://testflightapp.com/">TestFlight</a> which is the best in distributing ad hoc builds - with versioning and beta users management!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Which Ad Network to use in iOS?]]></title>
    <link href="http://samwize.github.com/2012/11/13/which-ad-network-to-use-in-ios/"/>
    <updated>2012-11-13T21:24:00+08:00</updated>
    <id>http://samwize.github.com/2012/11/13/which-ad-network-to-use-in-ios</id>
    <content type="html"><![CDATA[<p>My experience with using ads in iOS goes as far back in 2008 when iOS is released. It was simple back then, but now, I have lost count of the number of ad networks.</p>

<p>See what I mean:</p>

<p><a href="http://www.mobyaffiliates.com/blog/mobile-advertising-networks-market-map/"><img class="center" src="http://mobyaff2.danharrison.netdna-cdn.com/wp-content/uploads/2012/10/Mobile-Advertising-Networks-Market-Map-600.png"></a></p>

<p>This post I am going rave a bit. So..</p>

<p>tldr;</p>

<ul>
<li>Use 2 mediation - <a href="http://admob.com">Admob</a> &amp; <a href="http://mopub.com">MoPub</a> - and split them 50-50</li>
<li>Use <a href="http://admob.com">Admob</a></li>
<li>Use <a href="http://mmedia.com/">MillenialMedia/mMedia</a></li>
<li>Use <a href="inmobi.com">InMobi</a></li>
<li>Use <a href="https://developer.apple.com/iad/">iAd</a></li>
</ul>


<!-- more -->


<h2>In the early days..</h2>

<p>Back in the early days (2008), there is an obvious choice - <a href="http://admob.com">Admob</a>.</p>

<p>Back then, Admob is a startup, with strength in mobile analytics and mobile advertising. In fact, I started using them for mobile analytics in 2007.</p>

<p>When iPhone boomed, so did their value as they have a strong mobile ad network. They were eventually acquired by Google in the range of $BILLION$!</p>

<h2>Then come mediation - Adwhirl</h2>

<p>I was quite comfortable just serving ads from admob. It was also the first time that I had revenue coming from ads!</p>

<p>It was good, but I soon realized it could be better in around 2009.</p>

<p>Ads mediation became popular, and <a href="https://www.adwhirl.com/">Adwhirl</a> was the popular choice, as they are free, uncluttered, and open source.</p>

<p>By using a mediation means I start to use more than 1 ad network. Read on what I used.</p>

<p>Once again, Adwhirl was eventually acquired by Google..</p>

<h2>More ad networks</h2>

<p><a href="https://www.google.com/adsense/">Google Adsense</a> was the main reason that I used a mediation. In 2009, Google was a newcomer to mobile advertising, with Admob dominating.</p>

<p>However, we all know Google has the resource to catch, plus it has good network on the web advertising. I applied to be the BETA to mobile Adsense. I got in, integrated with Adwhirl, and revenue gets even better!</p>

<p>I realized mediation does help a lot. Reasons:</p>

<ul>
<li>When 1 ad network cannot be filled, it can try others</li>
<li>Inventory increased, so there is more varierty of ads shown</li>
</ul>


<p>I also integrated Quattro and Greystripe, but with little success from them.</p>

<p>And also iAd, but little success as my users are mainly outside US.</p>

<h2>The Google world is not good</h2>

<p>I have thought with the acquisition of Admob and Adwhirl, Google will provide great stuff.</p>

<p>I was totally wrong.</p>

<p>Admob is not improving. Their website design remains the same as 5 years ago. What's worse is that by introducing mediation and house ads, they now look complicated.</p>

<p>Adwhirl is deprecated. It's last SDK update is in 2011. If you want to use Adwhirl, you should use Admob. But there are actually better alternatives.</p>

<h2>MoPub - the new kid</h2>

<p>I started looking into <a href="http://mopub.com">MoPub</a> in 2012 for these reasons:</p>

<ul>
<li><p>Admob mediation is cranky. It reported fill rate as <a href="https://groups.google.com/forum/#!msg/google-admob-ads-sdk/wLMKhV2pMiA/tHfttXGfzlEJ">low</a> as 4% for my other networks! (serving Admob ads is very fine >90%)</p></li>
<li><p>Admob provides no support. Just like other Google service, it is hard to even find their support email. I posted on their Forum, but no Admob staff is replying.</p></li>
<li><p>Admob SDK will crash when they serve InMobi (hence I cannot use InMobi at all)</p></li>
<li><p>Admob website looks like in the 1990s</p></li>
</ul>


<p>To sum up, I wanted to move away from Admob.</p>

<p>MoPub looks great, and has it's SDK opensourced.</p>

<p>One of the problem with mediation is that integration is complex, and the network adaptors could be buggy (like the InMobi case with Admob). I thought MoPub is smart to provide their SDK source code. If there is a problem, at least we can fix it.</p>

<p>MoPub also promised integration with certain ad network without the need to integrate into the app. I have yet to try.</p>

<h2>The 50-50 mode</h2>

<p>However, that said, I choose to use both Admob and MoPub as mediation.</p>

<p>When I was using MoPub, I encountered some problems too.</p>

<ul>
<li><p>Frequently, it has the error "server response indicated no ad available." and doesn't get filled!</p></li>
<li><p>MoPub serve in a eCPM waterfall manner. That is it get ads from the network that pays best first, if not filled, then it moves on.</p></li>
</ul>


<p>Because of that, MoPub often serve the same ad. I seldom see Admob/Adsense ads. I rather have variety in my inventory.</p>

<p>To play safe, I do a 50-50 split.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[My Custom Localization and genstrings]]></title>
    <link href="http://samwize.github.com/2012/11/06/my-custom-localization-and-genstrings/"/>
    <updated>2012-11-06T21:49:00+08:00</updated>
    <id>http://samwize.github.com/2012/11/06/my-custom-localization-and-genstrings</id>
    <content type="html"><![CDATA[<p>This post is about some custom stuff I did for <a href="https://developer.apple.com/library/ios/#documentation/MacOSX/Conceptual/BPInternational/Articles/ChoosingLocalizations.html">localization</a>.</p>

<p>It does not cover the <a href="http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial">basic</a> of how you localized an app, nor how to use the Apple provided <a href="http://spritebandits.wordpress.com/2012/01/25/ios-iphone-app-localization-genstrings-tips/">genstrings</a> tool.</p>

<!-- more -->


<p>I have some particular bad vibes with using <code>NSLocalizedString</code>. I hate it being 17 characters long, and the REQUIRED comment parameter that you MUST pass in, which usually is just <code>nil</code> for me.</p>

<p>And so I have my own Macro called <code>Localized</code>.</p>

<p>Which I improved to read from other table strings, and has an awesome recursive replacement.</p>

<p>By doing that, I lose the use of <code>genstrings</code>, as it no longer uses <code>NSLocalizedString</code>. Unfortunately <code>genstrings</code> is closed source. But fortunately, some <a href="https://github.com/dunkelstern/Cocoa-Localisation-Helper">python helper</a> is around.</p>

<p>And the result is at <a href="https://github.com/samwize/localized">https://github.com/samwize/localized</a>.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOS Accessibility Guide for Developers]]></title>
    <link href="http://samwize.github.com/2012/11/04/ios-accessibility-guide-for-developers/"/>
    <updated>2012-11-04T18:25:00+08:00</updated>
    <id>http://samwize.github.com/2012/11/04/ios-accessibility-guide-for-developers</id>
    <content type="html"><![CDATA[<p>There are some simple steps you can take to make your iOS app friendly to the visually impaired users. All you need is to provide more meaningful labels and iOS VoiceOver will take care of it.</p>

<p>I am guilty that I didn't take these simple steps whenever I release a new app, even though I know about it since iOS 3.. Sometimes, I need a <a href="http://mattgemmell.com/2012/10/26/ios-accessibility-heroes-and-villains/">reminder</a>.</p>

<p>Treat this post as <em>another reminder</em>. And as a guide.</p>

<!-- more -->


<h2>Test with Accessibility Inspector</h2>

<p>In <strong>iOS Simulator</strong> (NOT actual device), go to Settings > General > Accessibility and switch it on.</p>

<p>You may now observe accessibility information for each UI element.</p>

<h2>Define in Interface Builder</h2>

<p>If you are using IB to build your UI, you can easily edit from the Identity Inspector. All <code>UIView</code> comes with accessibility attributes.</p>

<p><img src="/images/xcode-accessibility-inspector.png" title="Accessibility Inspector" ></p>

<ul>
<li>Enable Accessibility</li>
<li>Enter a label. This is what will be read with VoiceOver.</li>
<li>Enter a hint, if the label could be ambiguous.</li>
</ul>


<h2>Change Programmatically</h2>

<p>You can also change the label and hint programmatically.</p>

<p>If you have a <code>UILabel</code>, it will read the text of the label. However if that is not descriptive, you could</p>

<pre><code>mylabel.accessibilityLabel = @"Play the music";
mylabel.accessibilityHint = @"Play the music right now";
</code></pre>

<h2>UITableViewCell</h2>

<p>It is most likely a table view cell is made up of a couple of UI elements. However, it would be difficult to select the individual elements.</p>

<p>Hence you could help be aggregating the labels and set the <code>UITableCellView</code> accessibility options.</p>

<h2>UISlider</h2>

<p>For slider, you may also want to set the value.</p>

<pre><code>mySlider.accessibilityValue = @"Volume at 50%";
</code></pre>

<h2>Test on Device</h2>

<p>Go to Settings > General > Accessibility > Enable VoiceOver.</p>

<p>Test it out!</p>

<h2>Advanced</h2>

<p>I have merely list the <em>simple</em> steps I usually used.</p>

<p>Apple has it's own <a href="http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/iPhoneAccessibility/Making_Application_Accessible/Making_Application_Accessible.html#//apple_ref/doc/uid/TP40008785-CH102-SW5">complete guide</a> on how you should approach the topic, including custom views and <code>UIAccessibilityPostNotification</code>. <a href="http://mattgemmell.com/2010/12/19/accessibility-for-iphone-and-ipad-apps/">Matt Gemmell</a> also covers the topic.</p>

<p>Hope you be a hero!</p>
]]></content>
  </entry>
  
</feed>
