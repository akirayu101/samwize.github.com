
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Updating App for iPhone 5 - Junda Ong</title>
	<meta name="author" content="Junda">

	
	<meta name="description" content="Updating App for iPhone 5 This post is a guide to updating existing app for iPhone 5. As you already knew, the new iPhone 5 introduced a taller &hellip;">
	

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="Junda Ong" type="application/atom+xml">
	
	<link rel="canonical" href="http://samwize.com/2012/10/22/updating-app-for-iphone-5/">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700' rel='stylesheet' type='text/css'>
	<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><div class="profilepic">	
	<script src="/javascripts/md5.js"></script>
	<script type="text/javascript">
		$(function(){
			$('.profilepic').append("<img src='http://www.gravatar.com/avatar/" + MD5("junda@just2us.com") + "?s=160' alt='Profile Picture' style='width: 160px;' />");
		});
	</script>
</div>
<hgroup>
  <h1><a href="/">Junda Ong</a></h1>
</hgroup>

<script type="text/javascript">var _kiq = _kiq || [];</script>
<script type="text/javascript" src="//s3.amazonaws.com/ki.js/43620/8u-.js" async="true"></script>
<p class="subtitle">aka @samwize ¯\_(ツ)_/¯</p>
<nav id="main-nav"><ul class="main-navigation">
  <li><a href="/about/">About</a></li>
  <li><a href="/quotes/">Quotes</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<nav id="sub-nav">
	<div class="social">
		
		
		<a class="google" href="https://plus.google.com/106598772775527729355" rel="author" title="Google+">Google+</a>
		
		
		<a class="twitter" href="http://twitter.com/samwize" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/samwize" title="GitHub">GitHub</a>
		
		
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav>
</header>				
			</div>
		</div>	
		<div class="mid-col">
			
				
<div id="banner" class="inner">
	<div class="container">
		<ul class="feed"></ul>
	</div>
	<small><a href="http://twitter.com/samwize">samwize</a> @ <a href="http://twitter.com">Twitter</a></small>
	<div class="loading">Loading...</div>
</div>
<script src="/javascripts/twitter.js"></script>
<script type="text/javascript">
	(function($){
		$('#banner').getTwitterFeed('samwize', 4, false);
	})(jQuery);
</script>

			
			<div class="mid-col-container">
				<div id="content" class="inner"><article class="post" itemscope itemtype="http://schema.org/BlogPosting">
	<h1 class="title" itemprop="name">Updating App for iPhone 5</h1>
	<div class="entry-content" itemprop="articleBody"><p>This post is a guide to updating existing app for iPhone 5.</p>

<p>As you already knew, the new iPhone 5 introduced a taller screen at 4 inch, while all iPhones before is at 3.5 inch.</p>

<p>There are a couple of steps that you have to do to support the taller screen, and it really depends on how you develop your app in the first place. You might use all of the techniques below, or none.</p>

<p>These techniques are inspired by <a href="http://stackoverflow.com/questions/12395200/how-to-develop-or-migrate-apps-for-iphone-5-screen-resolution">answers</a> <a href="http://stackoverflow.com/questions/12518879/extend-app-for-iphone-5-best-practice">on</a> <a href="http://stackoverflow.com/questions/12519110/what-to-name-images-for-iphone-5-screen-size">Stackoverflow</a>. The result is a <code>Device</code> class I created at <a href="https://gist.github.com/3926123">https://gist.github.com/3926123</a></p>

<!-- more -->


<h2>1. Default-568h@2x.png</h2>

<p>There isn&#8217;t a setting to specify a project supports iPhone 5. Instead, a presence of a <code>Default-568h@2x.png</code> signify that it supports iPhone 5.</p>

<p>The size is 640 x 1136.</p>

<p>Xcode 4.5 will actually offer to add one automatically.</p>

<h2>2. Set to Full Screen at launch for MainWindow.xib</h2>

<p>If your tab bar didn&#8217;t work properly (such as don&#8217;t respond to click) after you added <code>Default-568h@2x.png</code>, then it is likely due to the nib configuration.</p>

<p>You have to go to interface builder, select the window object, and <a href="http://stackoverflow.com/a/12699347/242682">enable</a> <code>Full Screen at launch</code>.</p>

<h2>3. Code to detect 4-inch screen</h2>

<p>You can detect the 4-inch screen size with the following method:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="cm">/** Returns true if it is a iPhone/iPod with 4 inch tall screen */</span>
</span><span class='line'><span class="k">+</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isScreen4Inch</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">if</span><span class="p">(</span><span class="n">UI_USER_INTERFACE_IDIOM</span><span class="p">()</span> <span class="o">==</span> <span class="n">UIUserInterfaceIdiomPhone</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">CGRect</span> <span class="n">screenBounds</span> <span class="o">=</span> <span class="p">[[</span><span class="n">UIScreen</span> <span class="n">mainScreen</span><span class="p">]</span> <span class="n">bounds</span><span class="p">];</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="n">screenBounds</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span> <span class="o">==</span> <span class="mi">568</span><span class="p">)</span>
</span><span class='line'>            <span class="k">return</span> <span class="n">YES</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">NO</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>I have this in <code>Device.h</code>, so import and use.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="k">if</span> <span class="p">([</span><span class="n">Device</span> <span class="n">isScreen4Inch</span><span class="p">])</span> <span class="p">{</span>
</span><span class='line'>  <span class="c1">// Code for 4 inch</span>
</span><span class='line'><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>  <span class="c1">// Code for anything else (3.5 inch or iPad)</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>4. Use Auto Layout for iOS6</h2>

<p>If you are supporting only iOS6 and above, you should use Auto Layout.</p>

<p>You can read up a tutorial by <a href="http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2">Ray Wenderlich</a>.</p>

<h2>5. Set auto resizing mask for pre iOS6</h2>

<p>If you are still supporting pre iOS6, you still need auto resizing mask for your views to stretch and re-position automatically.</p>

<p>Refer to <a href="http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html">Apple UIView doc</a> on <code>UIViewAutoresizing</code>.</p>

<p>This &#8216;feature&#8217; was in iOS ever since iOS is available. If you design your apps mostly using Xcode Interface Builder, this would one of the most needed change.</p>

<p>You could change a subview to auto resize its width/height, and fix it&#8217;s margin to left/right/top/bottom.</p>

<h2>6. Stretch Images</h2>

<p>If you are using Xcode Interface Builder, change the UIImageView <code>mode</code> to <code>Scale to Fill</code> (or others).</p>

<p>Then change the <code>Stretching</code> properties. The values are a fraction of the image size. For example, X and Y are 0.5, and Width and Height are 0.1, it means stretch the portion of the image at center with 10% width and height.</p>

<p>Your images can also be <a href="http://mobiledevelopertips.com/user-interface/ios-5-uiimage-and-resizableimagewithcapinsets.html">stretched</a> with UIImage <code>resizableImageWithCapInsets:</code>.</p>

<p>But that works only if your image has portion that can be stretched without distortion. If it doesn&#8217;t, you have to create a new image <code>-568@2x</code> image, and use the trick covered next to load it automatically.</p>

<h2>7. Load -568h@2x images</h2>

<p>Unlike <code>@2x</code> which are loaded automatically for Retina Display, the <code>-568h@2x</code> are not loaded automatically for the taller iPhone (except the <code>Default-568h@2x.png</code>).</p>

<p>I use a convenient method below:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="k">+</span><span class="p">(</span><span class="n">UIImage</span><span class="o">*</span><span class="p">)</span><span class="nf">imageNamedFor568h:</span><span class="p">(</span><span class="n">NSString</span><span class="o">*</span><span class="p">)</span><span class="nv">imageName</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">([</span><span class="n">Device</span> <span class="n">isScreen4Inch</span><span class="p">])</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">NSString</span> <span class="o">*</span><span class="n">imageNameFor568h</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSString</span> <span class="nl">stringWithFormat:</span><span class="s">@&quot;%@-568h.%@&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">imageName</span> <span class="n">stringByDeletingPathExtension</span><span class="p">],</span> <span class="p">[</span><span class="n">imageName</span> <span class="n">pathExtension</span><span class="p">]];</span>
</span><span class='line'>        <span class="k">return</span> <span class="p">[</span><span class="n">UIImage</span> <span class="nl">imageNamed:</span><span class="n">imageNameFor568h</span><span class="p">];</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="k">return</span> <span class="p">[</span><span class="n">UIImage</span> <span class="nl">imageNamed:</span><span class="n">imageName</span><span class="p">];</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Using category, I introduced the method for UIImage.</p>

<p>To use, I would have to change the methods <code>[UIImage imageName:@"foo.png"]</code> to <code>[UIImage imageNameFor568h:@"foo.png"]</code>.</p>

<h2>8. iOS Simulator</h2>

<p>To run and test on a 4 inch iPhone, select <strong>Hardware</strong> > <strong>Device</strong> > <strong>iPhone (Retina 4-inch)</strong>.</p>

<h2>9. Last words..</h2>

<p>It largely depends on how you code your existing apps.</p>

<p>Use the above techniques as needed, and handily use the <a href="https://gist.github.com/3926123">Device class</a> methods.</p>

<p>If you use any third party libraries, you would also need to update their libs with support for <code>armv7s</code> (a new architecture for iPhone5). Popular libs are already updated at this point of writing eg. Flurry, Google Admob, and other ad networks.</p>
</div>

</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
	
	
	<a class="addthis_button_tweet"></a>
	
	
	<a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
	
	<a class="addthis_counter addthis_pill_style"></a>
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>



<section id="comment">
    <h1 class="title">Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>
</div>
			</div>
			<footer id="footer" class="inner"><p>
  Copyright &copy; 2013 - Junda -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

Design credit: <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a></footer>
			<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'just2us';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://samwize.com/2012/10/22/updating-app-for-iphone-5/';
        var disqus_url = 'http://samwize.com/2012/10/22/updating-app-for-iphone-5/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-8780506-5']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>




		</div>
	</div>
</body>
</html>
